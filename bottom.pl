#!/usr/bin/env perl
# -*- coding: utf-8 -*-
use strict;
use warnings;
use utf8;
use v5.14;
use Encode qw(:all);
use List::Util qw(first);

# For encoding the stdin and stdout as UTF-8
binmode STDIN, ":encoding(UTF-8)";
binmode STDOUT, ":encoding(UTF-8)";

sub decode_bottom;
sub encode_bottom;

my @byte_encoding = ( "❤️👉👈", ",👉👈", ",,👉👈", ",,,👉👈", ",,,,👉👈", "🥺👉👈",
"🥺,👉👈", "🥺,,👉👈", "🥺,,,👉👈", "🥺,,,,👉👈", "✨👉👈", "✨,👉👈",
"✨,,👉👈", "✨,,,👉👈", "✨,,,,👉👈", "✨🥺👉👈", "✨🥺,👉👈", "✨🥺,,👉👈",
"✨🥺,,,👉👈", "✨🥺,,,,👉👈", "✨✨👉👈", "✨✨,👉👈", "✨✨,,👉👈",
"✨✨,,,👉👈", "✨✨,,,,👉👈", "✨✨🥺👉👈", "✨✨🥺,👉👈", "✨✨🥺,,👉👈",
"✨✨🥺,,,👉👈", "✨✨🥺,,,,👉👈", "✨✨✨👉👈", "✨✨✨,👉👈", "✨✨✨,,👉👈",
"✨✨✨,,,👉👈", "✨✨✨,,,,👉👈", "✨✨✨🥺👉👈", "✨✨✨🥺,👉👈",
"✨✨✨🥺,,👉👈", "✨✨✨🥺,,,👉👈", "✨✨✨🥺,,,,👉👈", "✨✨✨✨👉👈",
"✨✨✨✨,👉👈", "✨✨✨✨,,👉👈", "✨✨✨✨,,,👉👈", "✨✨✨✨,,,,👉👈",
"✨✨✨✨🥺👉👈", "✨✨✨✨🥺,👉👈", "✨✨✨✨🥺,,👉👈", "✨✨✨✨🥺,,,👉👈",
"✨✨✨✨🥺,,,,👉👈", "💖👉👈", "💖,👉👈", "💖,,👉👈", "💖,,,👉👈",
"💖,,,,👉👈", "💖🥺👉👈", "💖🥺,👉👈", "💖🥺,,👉👈", "💖🥺,,,👉👈",
"💖🥺,,,,👉👈", "💖✨👉👈", "💖✨,👉👈", "💖✨,,👉👈", "💖✨,,,👉👈",
"💖✨,,,,👉👈", "💖✨🥺👉👈", "💖✨🥺,👉👈", "💖✨🥺,,👉👈", "💖✨🥺,,,👉👈",
"💖✨🥺,,,,👉👈", "💖✨✨👉👈", "💖✨✨,👉👈", "💖✨✨,,👉👈", "💖✨✨,,,👉👈",
"💖✨✨,,,,👉👈", "💖✨✨🥺👉👈", "💖✨✨🥺,👉👈", "💖✨✨🥺,,👉👈",
"💖✨✨🥺,,,👉👈", "💖✨✨🥺,,,,👉👈", "💖✨✨✨👉👈", "💖✨✨✨,👉👈",
"💖✨✨✨,,👉👈", "💖✨✨✨,,,👉👈", "💖✨✨✨,,,,👉👈", "💖✨✨✨🥺👉👈",
"💖✨✨✨🥺,👉👈", "💖✨✨✨🥺,,👉👈", "💖✨✨✨🥺,,,👉👈",
"💖✨✨✨🥺,,,,👉👈", "💖✨✨✨✨👉👈", "💖✨✨✨✨,👉👈", "💖✨✨✨✨,,👉👈",
"💖✨✨✨✨,,,👉👈", "💖✨✨✨✨,,,,👉👈", "💖✨✨✨✨🥺👉👈",
"💖✨✨✨✨🥺,👉👈", "💖✨✨✨✨🥺,,👉👈", "💖✨✨✨✨🥺,,,👉👈",
"💖✨✨✨✨🥺,,,,👉👈", "💖💖👉👈", "💖💖,👉👈", "💖💖,,👉👈", "💖💖,,,👉👈",
"💖💖,,,,👉👈", "💖💖🥺👉👈", "💖💖🥺,👉👈", "💖💖🥺,,👉👈", "💖💖🥺,,,👉👈",
"💖💖🥺,,,,👉👈", "💖💖✨👉👈", "💖💖✨,👉👈", "💖💖✨,,👉👈", "💖💖✨,,,👉👈",
"💖💖✨,,,,👉👈", "💖💖✨🥺👉👈", "💖💖✨🥺,👉👈", "💖💖✨🥺,,👉👈",
"💖💖✨🥺,,,👉👈", "💖💖✨🥺,,,,👉👈", "💖💖✨✨👉👈", "💖💖✨✨,👉👈",
"💖💖✨✨,,👉👈", "💖💖✨✨,,,👉👈", "💖💖✨✨,,,,👉👈", "💖💖✨✨🥺👉👈",
"💖💖✨✨🥺,👉👈", "💖💖✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨🥺👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨🥺👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖✨✨✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖,,👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖,,,,👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖🥺👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖🥺,👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖🥺,,,,👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨,👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨🥺👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨🥺,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨👉👈", "💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨🥺👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨🥺,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨🥺👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨✨👉👈",
"💖💖💖✨✨✨✨,,,,👉👈💖💖💖✨✨✨✨,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨🥺,,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨🥺👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨🥺👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖✨✨✨✨🥺,,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖🥺👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖🥺,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖🥺,,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨🥺👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨🥺,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨🥺,,,,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨,👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨🥺👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨👉👈", "💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨🥺👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨🥺,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨🥺,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨🥺,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨🥺,,,,👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨✨👉👈",
"💖💖💖✨✨✨✨🥺👉👈💖💖💖✨✨✨✨,👉👈");

sub decode_bottom {
  my $message = shift;
  my @substrings = split "👉👈", $message;
  my @byte_arr = ();
  foreach my $substr (@substrings) {
    push @byte_arr, (first { $byte_encoding[$_] eq $substr . "👉👈" } 0 .. 255);
  }
  my $converted_message = decode("UTF-8", (join '', (map {chr $_} @byte_arr)), 1);
  return $converted_message;
}

sub encode_bottom {
  my $message = shift;
  my $octets = encode("UTF-8", $message, 1);
  my @chars = split '', $octets;
  return join '', map {@byte_encoding[ord($_)]} @chars;
}
